<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Just4Learnin's Developer Portfolio</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-card: #262626;
            --text-primary: #ffffff;
            --text-secondary: #a3a3a3;
            --accent: #17e388;
            --accent-hover: #00cc6a;
            --border: #404040;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #0f0f0f 50%, var(--bg-primary) 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Loading Spinner */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            color: var(--accent);
        }

        .spinner {
            border: 3px solid var(--border);
            border-top: 3px solid var(--accent);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Admin Toggle Button - HIDDEN */
        .admin-toggle {
            display: none;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 3000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            padding: 2rem;
            border-radius: 15px;
            border: 1px solid var(--border);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-content h2 {
            margin-bottom: 1.5rem;
            color: var(--accent);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 5px;
            color: var(--text-primary);
            font-family: inherit;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .btn {
            background: var(--accent);
            color: var(--bg-primary);
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 0.5rem;
        }

        .btn:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-danger {
            background: #ff5f56;
        }

        .btn-danger:hover {
            background: #ff4444;
        }

        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        .tab {
            background: none;
            border: none;
            color: var(--text-secondary);
            padding: 0.5rem 1rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .tab.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Edit Mode Styles */
        .edit-mode .project-card,
        .edit-mode .log-entry {
            position: relative;
            padding-top: 3rem;
        }

        .edit-controls {
            display: none;
            position: absolute;
            top: 1rem;
            right: 1rem;
            gap: 0.5rem;
            z-index: 10;
        }

        .edit-mode .edit-controls {
            display: flex;
        }

        .edit-btn {
            background: var(--accent);
            color: var(--bg-primary);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .edit-btn:hover {
            transform: scale(1.05);
        }

        .delete-btn {
            background: #ff5f56;
        }

        .add-new-btn {
            display: none;
            margin: 2rem auto;
            padding: 1rem 2rem;
        }

        .edit-mode .add-new-btn {
            display: block;
        }

        /* Admin Bar */
        .admin-bar {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--accent);
            color: var(--bg-primary);
            padding: 1rem;
            text-align: center;
            font-weight: 600;
            z-index: 1001;
        }

        .admin-bar.active {
            display: block;
        }

        .admin-bar button {
            background: var(--bg-primary);
            color: var(--accent);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 1rem;
        }

        /* Image Upload */
        .image-preview {
            max-width: 100%;
            max-height: 200px;
            margin-top: 1rem;
            border-radius: 5px;
        }

        .project-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 1rem;
        }

        .upload-progress {
            margin-top: 1rem;
            color: var(--accent);
            font-size: 0.9rem;
        }

        /* Rest of your existing styles */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .edit-mode header {
            top: 50px;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            text-decoration: none;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--accent);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            padding-top: 80px;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 70%, rgba(0, 255, 136, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .hero-content {
            flex: 1;
            max-width: 600px;
            z-index: 2;
        }

        .hero h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: slideInUp 1s ease-out;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            animation: slideInUp 1s ease-out 0.2s both;
        }

        .hero-description {
            font-size: 1.1rem;
            margin-bottom: 2rem;
            color: var(--text-secondary);
            animation: slideInUp 1s ease-out 0.4s both;
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(135deg, var(--accent) 0%, #00cc6a 100%);
            color: var(--bg-primary);
            padding: 1rem 2rem;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            animation: slideInUp 1s ease-out 0.6s both;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.3);
        }

        .hero-visual {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .terminal-window {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 1rem;
            border: 1px solid var(--border);
            max-width: 400px;
            animation: slideInRight 1s ease-out 0.8s both;
        }

        .terminal-header {
            display: flex;
            gap: 8px;
            margin-bottom: 1rem;
        }

        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .dot-red { background: #ff5f56; }
        .dot-yellow { background: #ffbd2e; }
        .dot-green { background: #27ca3f; }

        .terminal-content {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            color: var(--accent);
        }

        .projects {
            padding: 5rem 0;
            background: var(--bg-secondary);
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 3rem;
            color: var(--text-primary);
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .project-card {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 2rem;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .project-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent), #00cc6a);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .project-card:hover::before {
            transform: scaleX(1);
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .project-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--accent);
        }

        .project-description {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .project-tech {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .tech-tag {
            background: rgba(0, 255, 136, 0.1);
            color: var(--accent);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .project-links {
            display: flex;
            gap: 1rem;
        }

        .project-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .project-link:hover {
            color: var(--accent);
        }

        .dev-log {
            padding: 5rem 0;
        }

        .log-entries {
            max-width: 800px;
            margin: 0 auto;
        }

        .log-entry {
            background: var(--bg-card);
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            border-left: 4px solid var(--accent);
            transition: transform 0.3s ease;
        }

        .log-entry:hover {
            transform: translateX(10px);
        }

        .log-date {
            color: var(--accent);
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .log-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .log-content {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        footer {
            background: var(--bg-primary);
            padding: 3rem 0;
            text-align: center;
            border-top: 1px solid var(--border);
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 2rem;
        }

        .social-links {
            display: flex;
            gap: 1rem;
        }

        .social-link {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 0.5rem;
            border-radius: 50%;
            background: var(--bg-card);
            transition: all 0.3s ease;
        }

        .social-link:hover {
            color: var(--accent);
            transform: translateY(-2px);
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .cursor {
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .hero {
                flex-direction: column;
                text-align: center;
                gap: 2rem;
            }
            
            .terminal-window {
                max-width: 300px;
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
        }

        .error-message {
            background: rgba(255, 95, 86, 0.1);
            border: 1px solid #ff5f56;
            color: #ff5f56;
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
        }

        .success-message {
            background: rgba(23, 227, 136, 0.1);
            border: 1px solid var(--accent);
            color: var(--accent);
            padding: 1rem;
            border-radius: 5px;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <!-- Admin Bar -->
    <div class="admin-bar" id="adminBar">
        🔒 Admin Mode Active - <span id="userEmail"></span>
        <button onclick="exitAdmin()">Sign Out</button>
    </div>

    <!-- Admin Toggle Button -->
    <button class="admin-toggle" onclick="toggleAdmin()">🔧</button>

    <!-- Login/Register Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <h2>Admin Access</h2>
            <div class="tabs">
                <button class="tab active" onclick="switchTab('login')">Login</button>
                <button class="tab" onclick="switchTab('register')">Create Account</button>
            </div>
            
            <div id="loginTab" class="tab-content active">
                <div id="loginError" style="display:none;" class="error-message"></div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter password">
                </div>
                <button class="btn" onclick="loginUser()" id="loginBtn">Login</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            </div>
            
            <div id="registerTab" class="tab-content">
                <div id="registerError" style="display:none;" class="error-message"></div>
                <div id="registerSuccess" style="display:none;" class="success-message"></div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="registerEmail" placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>Password (min 6 characters)</label>
                    <input type="password" id="registerPassword" placeholder="Create password">
                </div>
                <div class="form-group">
                    <label>Confirm Password</label>
                    <input type="password" id="registerPasswordConfirm" placeholder="Confirm password">
                </div>
                <button class="btn" onclick="registerUser()" id="registerBtn">Create Account</button>
                <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <h2 id="editModalTitle">Edit Item</h2>
            <div id="editModalContent"></div>
            <div id="uploadProgress" class="upload-progress" style="display:none;"></div>
            <button class="btn" onclick="saveEdit()" id="saveEditBtn">Save</button>
            <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
        </div>
    </div>

    <header>
        <nav class="container">
            <a href="#" class="logo">Just4Learnin</a>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#projects">Projects</a></li>
                <li><a href="#devlog">Dev Log</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="home" class="hero">
            <div class="container">
                <div style="display: flex; align-items: center; gap: 3rem;">
                    <div class="hero-content">
                        <h1>Just4Learning's devlog</h1>
                        <p class="hero-subtitle">Building cool stuff with code and hardware</p>
                        <p class="hero-description">
                            I'm passionate about creating innovative solutions through software development, 
                            hardware projects, and system administration. From retro gaming setups to 
                            enterprise home labs, I love bringing ideas to life.
                        </p>
                        <a href="#projects" class="cta-button">View My Work</a>
                    </div>
                    <div class="hero-visual">
                        <div class="terminal-window">
                            <div class="terminal-header">
                                <div class="terminal-dot dot-red"></div>
                                <div class="terminal-dot dot-yellow"></div>
                                <div class="terminal-dot dot-green"></div>
                            </div>
                            <div class="terminal-content">
                                <div>$ whoami</div>
                                <div>developer</div>
                                <div>$ ls projects/</div>
                                <div>retro-pi/</div>
                                <div>home-lab/</div>
                                <div>web-apps/</div>
                                <div>$ echo "Hello World!"</div>
                                <div>Hello World!</div>
                                <div class="cursor">_</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="projects" class="projects">
            <div class="container">
                <h2 class="section-title">Featured Projects</h2>
                <div class="projects-grid" id="projectsGrid">
                    <div class="loading"><div class="spinner"></div></div>
                </div>
                <button class="btn add-new-btn" onclick="addNewProject()">+ Add New Project</button>
            </div>
        </section>

        <section id="devlog" class="dev-log">
            <div class="container">
                <h2 class="section-title">Development Log</h2>
                <div class="log-entries" id="logEntries">
                    <div class="loading"><div class="spinner"></div></div>
                </div>
                <button class="btn add-new-btn" onclick="addNewLog()">+ Add New Log Entry</button>
            </div>
        </section>
    </main>

    <footer id="contact">
        <div class="container">
            <div class="footer-content">
                <div>
                    <p style="color: var(--text-secondary);">© 2025 LifeMediaServices ill get a copyright eventually.</p>
                </div>
                <div class="social-links">
                    <a href="https://github.com/Just4Learnin" class="social-link" title="GitHub">GitHub</a>
                    <a href="#" class="social-link" title="LinkedIn">LinkedIn</a>
                    <a href="mailto:Lifesmediaservices@gmail.com" class="social-link" title="Email">Email</a>
                    <a href="#" class="social-link" title="Twitter">Twitter</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Firebase SDK (NO STORAGE NEEDED!) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script>
        // ⚠️ REPLACE THIS WITH YOUR FIREBASE CONFIG ⚠️
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY_HERE",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyDEhZq_Cgh8kMTMh7_1kau2xSResZGmD1o",
  authDomain: "just4learnin-portfolio.firebaseapp.com",
  projectId: "just4learnin-portfolio",
  storageBucket: "just4learnin-portfolio.firebasestorage.app",
  messagingSenderId: "892344694841",
  appId: "1:892344694841:web:35ea5f1302a9119f0a35e8"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);

        // Initialize Firebase (NO STORAGE!)
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // State
        let currentUser = null;
        let currentEditId = null;
        let currentEditType = null;

        // Keyboard Shortcut: Ctrl + L ONLY
        document.addEventListener('keydown', function(e) {
            // Check for Ctrl+L (both Windows/Linux and Mac with Ctrl key)
            if (e.ctrlKey && e.key === 'l' && !e.metaKey) {
                e.preventDefault(); // Prevent browser's default "go to address bar"
                toggleAdmin();
            }
        });

        // Authentication State Listener
        auth.onAuthStateChanged(user => {
            currentUser = user;
            if (user) {
                document.body.classList.add('edit-mode');
                document.getElementById('adminBar').classList.add('active');
                document.getElementById('userEmail').textContent = user.email;
            } else {
                document.body.classList.remove('edit-mode');
                document.getElementById('adminBar').classList.remove('active');
            }
        });

        // Initialize
        async function init() {
            await loadProjects();
            await loadLogs();
        }

        // Load Projects from Firebase
        async function loadProjects() {
            try {
                const snapshot = await db.collection('projects').orderBy('order').get();
                const projectsGrid = document.getElementById('projectsGrid');
                
                if (snapshot.empty) {
                    // Load default projects if none exist
                    await loadDefaultProjects();
                    return;
                }
                
                projectsGrid.innerHTML = snapshot.docs.map(doc => {
                    const p = doc.data();
                    return `
                        <div class="project-card" data-id="${doc.id}">
                            ${currentUser ? `
                            <div class="edit-controls">
                                <button class="edit-btn" onclick="editProject('${doc.id}')">Edit</button>
                                <button class="edit-btn delete-btn" onclick="deleteProject('${doc.id}')">Delete</button>
                            </div>
                            ` : ''}
                            ${p.imageUrl ? `<img src="${p.imageUrl}" alt="${p.title}" class="project-image">` : ''}
                            <h3 class="project-title">${p.title}</h3>
                            <p class="project-description">${p.description}</p>
                            <div class="project-tech">
                                ${p.tech.map(t => `<span class="tech-tag">${t}</span>`).join('')}
                            </div>
                            <div class="project-links">
                                ${p.links.map(l => `<a href="${l.url}" class="project-link" ${l.url.startsWith('http') ? 'target="_blank"' : ''}>${l.text} →</a>`).join('')}
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Error loading projects:', error);
                document.getElementById('projectsGrid').innerHTML = '<p style="color: var(--text-secondary); text-align: center;">Error loading projects. Please refresh.</p>';
            }
        }

        // Load Logs from Firebase
        async function loadLogs() {
            try {
                const snapshot = await db.collection('logs').orderBy('timestamp', 'desc').get();
                const logEntries = document.getElementById('logEntries');
                
                if (snapshot.empty) {
                    // Load default logs if none exist
                    await loadDefaultLogs();
                    return;
                }
                
                logEntries.innerHTML = snapshot.docs.map(doc => {
                    const l = doc.data();
                    return `
                        <div class="log-entry" data-id="${doc.id}">
                            ${currentUser ? `
                            <div class="edit-controls">
                                <button class="edit-btn" onclick="editLog('${doc.id}')">Edit</button>
                                <button class="edit-btn delete-btn" onclick="deleteLog('${doc.id}')">Delete</button>
                            </div>
                            ` : ''}
                            <div class="log-date">${l.date}</div>
                            <h3 class="log-title">${l.title}</h3>
                            <div class="log-content">${l.content}</div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Error loading logs:', error);
                document.getElementById('logEntries').innerHTML = '<p style="color: var(--text-secondary); text-align: center;">Error loading logs. Please refresh.</p>';
            }
        }

        // Load Default Projects (first time setup)
        async function loadDefaultProjects() {
            const defaultProjects = [
                {
                    title: "🕹️ Retro Pi Gaming System",
                    description: "Built a custom retro gaming console using Raspberry Pi 4, featuring over 1000 classic games from multiple console generations. wireless controllers.",
                    tech: ["Raspberry Pi", "RetroPie", "Linux", "3D Printing", "Electronics"],
                    links: [
                        { text: "View Details", url: "#" },
                        { text: "GitHub", url: "https://github.com/Just4Learnin" }
                    ],
                    imageUrl: "",
                    order: 1
                },
                {
                    title: "🏠 Home-Lab 🏠",
                    description: "coming soon.",
                    tech: ["Proxmox", "Docker", "Kubernetes", "pfSense", "Grafana"],
                    links: [
                        { text: "View Details", url: "#" },
                        { text: "Documentation", url: "#" }
                    ],
                    imageUrl: "",
                    order: 2
                },
                {
                    title: "⚡ Koromi Themed Media Player ⚡",
                    description: "Created a custom media player with Koromi elements... currently it only streams and you can add mp3 files to play locally. still working out some kinks though.",
                    tech: ["ESP32", "Arduino", "MQTT", "Node.js", "React", "RaspberryPi"],
                    links: [
                        { text: "View Details", url: "#" },
                        { text: "GitHub", url: "#" }
                    ],
                    imageUrl: "",
                    order: 3
                },
                {
                    title: "📊 Network Monitoring Dashboard",
                    description: "Developed a comprehensive network monitoring solution with real-time analytics, alerting system, and beautiful visualizations.",
                    tech: ["Python", "Flask", "InfluxDB", "Grafana", "Docker"],
                    links: [
                        { text: "View Details", url: "#" },
                        { text: "Live Demo", url: "https://www.youtube.com/watch?v=xvFZjo5PgG0" }
                    ],
                    imageUrl: "",
                    order: 4
                }
            ];

            for (const project of defaultProjects) {
                await db.collection('projects').add(project);
            }
            await loadProjects();
        }

        // Load Default Logs (first time setup)
        async function loadDefaultLogs() {
            const defaultLogs = [
                {
                    date: "Entry 1: September 16, 2025",
                    title: "Portfolio website / enviroment creation",
                    content: "Successfully created HTML script to edit this portfolio website along with the help of the LLM Claude.ai...",
                    timestamp: firebase.firestore.Timestamp.fromDate(new Date('2025-09-16'))
                },
                {
                    date: "September 16, 2025",
                    title: "Retro Pi Case Design Iteration 3",
                    content: "Completed the three different iteration of the custom Retro Pi design & setup...",
                    timestamp: firebase.firestore.Timestamp.fromDate(new Date('2025-09-16'))
                },
                {
                    date: "September 24-27, 2025",
                    title: "Completion of Custom MediaPlayer",
                    content: "completed basic HTML courses and began CSS basics on freecodeacedemy.com...",
                    timestamp: firebase.firestore.Timestamp.fromDate(new Date('2025-09-27'))
                },
                {
                    date: "October 30, 2024",
                    title: "Network Monitoring Dashboard v2.0",
                    content: "Released version 2.0 of the network monitoring dashboard with new features...",
                    timestamp: firebase.firestore.Timestamp.fromDate(new Date('2024-10-30'))
                }
            ];

            for (const log of defaultLogs) {
                await db.collection('logs').add(log);
            }
            await loadLogs();
        }

        // Authentication Functions
        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            if (tab === 'login') {
                document.querySelectorAll('.tab')[0].classList.add('active');
                document.getElementById('loginTab').classList.add('active');
            } else {
                document.querySelectorAll('.tab')[1].classList.add('active');
                document.getElementById('registerTab').classList.add('active');
            }
        }

        async function registerUser() {
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerPasswordConfirm').value;
            const errorDiv = document.getElementById('registerError');
            const successDiv = document.getElementById('registerSuccess');
            const btn = document.getElementById('registerBtn');
            
            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';
            
            if (!email || !password) {
                errorDiv.textContent = 'Please fill in all fields';
                errorDiv.style.display = 'block';
                return;
            }
            
            if (password !== confirmPassword) {
                errorDiv.textContent = 'Passwords do not match';
                errorDiv.style.display = 'block';
                return;
            }
            
            if (password.length < 6) {
                errorDiv.textContent = 'Password must be at least 6 characters';
                errorDiv.style.display = 'block';
                return;
            }
            
            btn.disabled = true;
            btn.textContent = 'Creating Account...';
            
            try {
                await auth.createUserWithEmailAndPassword(email, password);
                successDiv.textContent = 'Account created successfully! You can now login.';
                successDiv.style.display = 'block';
                document.getElementById('registerEmail').value = '';
                document.getElementById('registerPassword').value = '';
                document.getElementById('registerPasswordConfirm').value = '';
                
                setTimeout(() => {
                    switchTab('login');
                    document.getElementById('loginEmail').value = email;
                }, 2000);
            } catch (error) {
                errorDiv.textContent = error.message;
                errorDiv.style.display = 'block';
            } finally {
                btn.disabled = false;
                btn.textContent = 'Create Account';
            }
        }

        async function loginUser() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');
            const btn = document.getElementById('loginBtn');
            
            errorDiv.style.display = 'none';
            
            if (!email || !password) {
                errorDiv.textContent = 'Please fill in all fields';
                errorDiv.style.display = 'block';
                return;
            }
            
            btn.disabled = true;
            btn.textContent = 'Logging in...';
            
            try {
                await auth.signInWithEmailAndPassword(email, password);
                closeModal();
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
            } catch (error) {
                errorDiv.textContent = 'Invalid email or password';
                errorDiv.style.display = 'block';
            } finally {
                btn.disabled = false;
                btn.textContent = 'Login';
            }
        }

        function exitAdmin() {
            auth.signOut();
        }

        function toggleAdmin() {
            if (currentUser) {
                exitAdmin();
            } else {
                document.getElementById('authModal').classList.add('active');
            }
        }

        function closeModal() {
            document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));
        }

        // Edit Project
        async function editProject(id) {
            const doc = await db.collection('projects').doc(id).get();
            const project = doc.data();
            currentEditId = id;
            currentEditType = 'project';
            
            document.getElementById('editModalTitle').textContent = 'Edit Project';
            document.getElementById('editModalContent').innerHTML = `
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" id="editTitle" value="${project.title}">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea id="editDescription">${project.description}</textarea>
                </div>
                <div class="form-group">
                    <label>Technologies (comma-separated)</label>
                    <input type="text" id="editTech" value="${project.tech.join(', ')}">
                </div>
                <div class="form-group">
                    <label>Image Options:</label>
                    <div style="margin-bottom: 0.5rem;">
                        <input type="radio" name="imageMethod" id="methodUrl" value="url" checked onchange="toggleImageMethod()">
                        <label for="methodUrl" style="display: inline; margin-left: 0.5rem;">Image URL</label>
                    </div>
                    <div>
                        <input type="radio" name="imageMethod" id="methodUpload" value="upload" onchange="toggleImageMethod()">
                        <label for="methodUpload" style="display: inline; margin-left: 0.5rem;">Upload Image (stored as Base64)</label>
                    </div>
                </div>
                <div class="form-group" id="urlMethod">
                    <label>Image URL (e.g., from Imgur, GitHub, etc.)</label>
                    <input type="text" id="editImageUrl" value="${project.imageUrl || ''}" placeholder="https://i.imgur.com/example.jpg">
                    <small style="color: var(--text-secondary); display: block; margin-top: 0.5rem;">
                        💡 Tip: Upload to <a href="https://imgur.com/upload" target="_blank" style="color: var(--accent);">Imgur</a> or use GitHub repo images
                    </small>
                </div>
                <div class="form-group" id="uploadMethod" style="display: none;">
                    <label>Upload Image (Max 1MB recommended)</label>
                    <input type="file" id="imageUpload" accept="image/*" onchange="handleImageUpload(event)">
                    <small style="color: var(--text-secondary); display: block; margin-top: 0.5rem;">
                        ⚠️ Images stored as Base64. Keep files under 1MB for best performance.
                    </small>
                </div>
                ${project.imageUrl ? `<img src="${project.imageUrl}" class="image-preview" id="imagePreview">` : '<img id="imagePreview" class="image-preview" style="display:none;">'}
            `;
            
            document.getElementById('editModal').classList.add('active');
        }

        // Edit Log
        async function editLog(id) {
            const doc = await db.collection('logs').doc(id).get();
            const log = doc.data();
            currentEditId = id;
            currentEditType = 'log';
            
            document.getElementById('editModalTitle').textContent = 'Edit Log Entry';
            document.getElementById('editModalContent').innerHTML = `
                <div class="form-group">
                    <label>Date</label>
                    <input type="text" id="editDate" value="${log.date}">
                </div>
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" id="editTitle" value="${log.title}">
                </div>
                <div class="form-group">
                    <label>Content</label>
                    <textarea id="editContent" style="min-height: 150px;">${log.content}</textarea>
                </div>
            `;
            
            document.getElementById('editModal').classList.add('active');
        }

        // Toggle Image Method
        function toggleImageMethod() {
            const method = document.querySelector('input[name="imageMethod"]:checked').value;
            document.getElementById('urlMethod').style.display = method === 'url' ? 'block' : 'none';
            document.getElementById('uploadMethod').style.display = method === 'upload' ? 'block' : 'none';
        }

        // Save Edit
        async function saveEdit() {
            const btn = document.getElementById('saveEditBtn');
            btn.disabled = true;
            btn.textContent = 'Saving...';
            
            try {
                if (currentEditType === 'project') {
                    const imageUrl = document.getElementById('editImageUrl') ? document.getElementById('editImageUrl').value : '';
                    
                    const updateData = {
                        title: document.getElementById('editTitle').value,
                        description: document.getElementById('editDescription').value,
                        tech: document.getElementById('editTech').value.split(',').map(t => t.trim()),
                        imageUrl: imageUrl
                    };
                    
                    await db.collection('projects').doc(currentEditId).update(updateData);
                    await loadProjects();
                } else if (currentEditType === 'log') {
                    const updateData = {
                        date: document.getElementById('editDate').value,
                        title: document.getElementById('editTitle').value,
                        content: document.getElementById('editContent').value,
                        timestamp: firebase.firestore.Timestamp.now()
                    };
                    
                    await db.collection('logs').doc(currentEditId).update(updateData);
                    await loadLogs();
                }
                
                closeModal();
                alert('Changes saved successfully!');
            } catch (error) {
                console.error('Error saving:', error);
                alert('Error saving changes. Please try again.');
            } finally {
                btn.disabled = false;
                btn.textContent = 'Save';
            }
        }

        // Delete Functions
        async function deleteProject(id) {
            if (!confirm('Are you sure you want to delete this project?')) return;
            
            try {
                await db.collection('projects').doc(id).delete();
                await loadProjects();
            } catch (error) {
                console.error('Error deleting project:', error);
                alert('Error deleting project. Please try again.');
            }
        }

        async function deleteLog(id) {
            if (!confirm('Are you sure you want to delete this log entry?')) return;
            
            try {
                await db.collection('logs').doc(id).delete();
                await loadLogs();
            } catch (error) {
                console.error('Error deleting log:', error);
                alert('Error deleting log. Please try again.');
            }
        }

        // Add New Functions
        async function addNewProject() {
            try {
                const snapshot = await db.collection('projects').get();
                const maxOrder = snapshot.docs.reduce((max, doc) => Math.max(max, doc.data().order || 0), 0);
                
                const newProject = {
                    title: "New Project",
                    description: "Project description here",
                    tech: ["Technology1", "Technology2"],
                    links: [{ text: "View Details", url: "#" }],
                    imageUrl: "",
                    order: maxOrder + 1
                };
                
                const docRef = await db.collection('projects').add(newProject);
                await loadProjects();
                editProject(docRef.id);
            } catch (error) {
                console.error('Error adding project:', error);
                alert('Error adding project. Please try again.');
            }
        }

        async function addNewLog() {
            try {
                const today = new Date().toLocaleDateString('en-US', { 
                    month: 'long', 
                    day: 'numeric', 
                    year: 'numeric' 
                });
                
                const newLog = {
                    date: today,
                    title: "New Log Entry",
                    content: "Write your log entry content here...",
                    timestamp: firebase.firestore.Timestamp.now()
                };
                
                const docRef = await db.collection('logs').add(newLog);
                await loadLogs();
                editLog(docRef.id);
            } catch (error) {
                console.error('Error adding log:', error);
                alert('Error adding log. Please try again.');
            }
        }

        // Image Upload Handler (Base64)
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Check file size (warn if over 1MB)
            if (file.size > 1024 * 1024) {
                if (!confirm('This image is larger than 1MB. It may slow down your site. Continue anyway?')) {
                    event.target.value = '';
                    return;
                }
            }
            
            const progressDiv = document.getElementById('uploadProgress');
            progressDiv.style.display = 'block';
            progressDiv.textContent = 'Converting image...';
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64Image = e.target.result;
                
                // Store in hidden input or update directly
                if (!document.getElementById('editImageUrl')) {
                    const input = document.createElement('input');
                    input.type = 'hidden';
                    input.id = 'editImageUrl';
                    document.getElementById('editModalContent').appendChild(input);
                }
                document.getElementById('editImageUrl').value = base64Image;
                
                // Show preview
                const preview = document.getElementById('imagePreview');
                preview.src = base64Image;
                preview.style.display = 'block';
                
                progressDiv.textContent = 'Image ready! Click Save to apply.';
                progressDiv.style.color = 'var(--accent)';
                
                setTimeout(() => {
                    progressDiv.style.display = 'none';
                }, 2000);
            };
            
            reader.onerror = function() {
                progressDiv.textContent = 'Error reading image';
                progressDiv.style.color = '#ff5f56';
            };
            
            reader.readAsDataURL(file);
        }

        // Initialize on load
        init();
    </script>
</body>
</html>